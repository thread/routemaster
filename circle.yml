dependencies:
  pre:
    - pip install -r scripts/testing/requirements.txt
    - pip install -r scripts/linting/requirements.txt
    - sudo apt-get update ; sudo apt-get install python3 python3-setuptools
  override:
    - pip install tox tox-pyenv
    - pyenv local 3.6.3
    - rm -rf routemaster.egg-info

test:
  pre:
    - find . -name '__pycache__' -or -name '*.pyc' | xargs rm -rf
  override:
    - tox
    - mv build/pytest/ $CIRCLE_TEST_REPORTS/pytest
